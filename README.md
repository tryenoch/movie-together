# MovieTogether

## 서비스 개요
- 일간 영화 순위 및 상영관별 시간표 조회 사이트
- tmdb api를 통한 영화 검색
- 시간표 조회 대상 상영 서비스는 CGV, 롯데시네마, 메가박스로 특정

## 개발배경
- 현재 상영 중인 영화의 박스오피스 순위를 통합 조회 서비스 제공(영화진흥위원회 API)
- 해당 영화의 지역 상영관별 상영 시간을 한꺼번에 조회함으로써 여러 사이트에 각각 조회해야하는 불편함 해소

### 사이트 주소
- [바로가기]()

### 진행기간 및 개발인원
> 2023.06.28 - 2023.07.11 (4명)
- [chanmi](https://github.com/enoch012) / 팀장, 게시판, 마이페이지, 전체 UI
- [junho](https://github.com/gidul0491) / 소설 상세, 영화 시간표 조회, 리뷰
- [donguk](https://github.com/simplelag) / 메인 순위, 
- [junhee](https://github.com/Serendpth) / 로그인, 회원가입

## 주요 개발환경
- Spring Boot 3.1.2 / Mybatis / MySQL / Thymeleaf
- Library : Selenium / Bootstrap

## 개선사항 및 문제 해결 내역
### API간 제목 양식 변동 에러
- 영화진흥원 API와 tmdb API 간 제목 양식이 같았다가 개발 중간에 tmdb의 제목 양식이 여러번, 바뀌어 제목을 기반으로 서로 간의 데이터를 불러오는 데 오류가 발생했다.
- `movieNameConverter.js` 문서를 생성해 해당 함수에서 예외 사항을 처리할 수 있도록 했다. 
<details>
<summary>접기/펼치기</summary> 

``` java 
// 추가 : pjh
// tmdb에 사용될 영화제목의 경우에 conv(영화제목) 함수를 사용하면 됨
// 영화진흥원에 등록된 영화제목과 tmdb에 등록된 영화제목이 다를 경우 사용됨
// 영화진흥원에 등록된 영화제목은 롯데시네마, cgv, 메가박스, 다음에서 그대로 사용됨

// 숫자로 시리즈가 표기된 경우 숫자와 그앞의 문자열 사이에 공백이 있어야 tmdb에서 검색됨 -> 공백을 자동으로 넣어줌
// 규칙이 없는 경우 자동변환이 불가능하므로 switch문에 수동으로 추가해줘야함

// 추가방법
// case "영화진흥원에 등록된 영화제목" :
// result = "tmdb에 등록된 영화제목";
// break;

function conv(mn){
     let name = mn;

    // (문자열)(숫자) 조합의 영화제목일 경우 문자열과 숫자 사이에 공백을 추가함
    // ex) "핑크퐁 시네마 콘서트3 : 진저브레드맨을 잡아라" -> "핑크퐁 시네마 콘서트 3 : 진저브레드맨을 잡아라"
    if(name.length > 1){
        for(let i = 1; i < name.length; i ++){
            // 공백일 경우 isNaN() 값이 false가 되므로, 공백이 아닐 경우만 적용되도록 if문 조건에 추가
            if(!isNaN(name[i]) && isNaN(name[i-1]) && name[i] != " "){
                const temp = name.substring(0,i) + " " + name.substring(i);
                name = temp;
                break;
            }
        }
    }

    let result;

    switch (name){
        case "예시":
            result = "결과";
            break;

        case "명탐정코난: 흑철의 어영":
            result = "명탐정 코난: 흑철의 어영";
            break;

        default:
            result = name;
            break;
    }
    return result;
}


```
</details>

## 구현 기능 목록
1. 영화 메인
    - 일간 박스오피스 순위를 볼 수 있다.
    - 영화명으로 검색을 할 수 있다. 
    - 최근 출시 영화 리스트를 볼 수 있다.
2. 영화 상세
    - 영화 상세 정보를 볼 수 있다. (영화 소개, 개봉일, 상영 시간, 누적 관객 등)
    - 영화사(CGV, 롯데시네마, 메가박스)의 지역별 상영 시간을 한꺼번에 조회할 수 있다.
    - 사이트 내 좋아요 수를 볼 수 있다.
    - 사이트 내 작품 리뷰글을 볼 수 있다.
3. 회원
    - 일반적인 로그인, 회원가입, 회원 정보 수정(비밀번호 변경)
    - 성인일 경우, 성인 작품 썸네일과 상세페이지를 볼 수 있다.
    - 작품 상세페이지 내 좋아요를 남길 수 있다.
    - 작품 상세페이지 내 리뷰 댓글을 남길 수 있다.
    - 모든 게시판의 글을 볼 수 있다.
    - 문의 게시판에 글을 남길 수 있다.
    - 마이 페이지에서 좋아요 영화 리스트를 볼 수 있다.
4. 관리자
    - 지역별 영화관 데이터 업데이트가 가능하다.(폐점, 개점 등)
    - 모든 게시판의 글쓰기, 삭제가 가능하다.
5. 게시판
    - 기본 CRUD
    - 문의 게시판의 카테고리 기능
    - 게시글 검색 기능
    - 파일 업로드 기능